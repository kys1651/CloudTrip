<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.trip.domain.home.mapper.HomeMapper">

    <select id="getTotalNumberOfReviews" >
        SELECT count(*)
        FROM review;
    </select>

    <select id="getTotalNumberOfNotices" >
        SELECT count(*)
        FROM notice;
    </select>

    <select id="getTotalNumberOfUsers" >
        SELECT count(*)
        FROM users;
    </select>

    <select id="getTotalNumberOftours" >
        SELECT count(*)
        FROM tour;
    </select>

    <select id="getTotalNumberOfPlans" >
        SELECT count(*)
        FROM plan;
    </select>

    <!--    Top 여행지 조회  -->
    <!--  review를 남길 때 별점 기준으로 책정  -->
    <!--  review table의 rating 칼럼 기준  -->
    <select id="getTopTours" >
        SELECT tour_id AS 여행지, avg(rating)
        FROM review
        GROUP BY tour_id
        ORDER BY avg(review.rating) DESC
        LIMIT 8;
    </select>

    <!-- Top 리뷰 조회  -->
    <!-- 리뷰에 달린 좋아요를 기준으로 책정 -->
    <!-- review table 참조 -->
    <select id="getTopReviews" >
        SELECT *
        FROM review
        ORDER BY like_count DESC
        LIMIT 8;
    </select>



</mapper>